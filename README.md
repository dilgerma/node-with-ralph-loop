# Event Model Project

This project uses event-model driven development with Claude Code and EMBuilder.

## Quick Start

### Available Commands

Use these commands in Claude Code to generate slices from your event model:

**Event Model Skills:**
```
/state-change-slice   # Generate a command handler slice
/state-view-slice     # Generate a read model/projection slice
/automation-slice     # Generate a background automation slice
```

**Configuration:**
```
/fetch-config         # Fetch config.json from event model app (localhost:3001)
```

**Yeoman Generator Skills:**
```
/gen-skeleton         # Generate Supabase backend skeleton app
/gen-state-change     # Generate state change slices from config.json
/gen-state-view       # Generate state view slices from config.json
/gen-automation       # Generate automation slices from config.json
/gen-ui               # Set up React UI with shadcn/ui and Supabase
```

## How to Invoke

### Using Event Model Skills

1. **Generate a State Change Slice (Command Handler)**
   ```
   In Claude Code, type: /state-change-slice
   ```
   Claude will:
   - Find your event model file
   - Ask you which command to implement
   - Generate CommandHandler.ts with business logic
   - Create routes.ts for HTTP endpoints
   - Generate tests
   - Run the tests automatically

2. **Generate a State View Slice (Read Model)**
   ```
   In Claude Code, type: /state-view-slice
   ```
   Claude will:
   - Find your event model
   - Ask which read model to implement
   - Generate Projection.ts with event handlers
   - Create query endpoints
   - Generate tests
   - Run the tests

3. **Generate an Automation Slice (Background Process)**
   ```
   In Claude Code, type: /automation-slice
   ```
   Claude will:
   - Find your event model
   - Ask which automation to implement
   - Generate processor.ts with CRON logic
   - Create background job handlers
   - Generate tests
   - Run the tests

### Using Yeoman Generator Skills

1. **Fetch Configuration from Event Model App**
   ```
   In Claude Code, type: /fetch-config
   ```
   This will start a server and fetch config.json from your running event model app.

2. **Generate Multiple Slices from Config**
   ```
   In Claude Code, type: /gen-state-change
   ```
   Or use `/gen-state-view` or `/gen-automation` to generate slices based on your config.json.

3. **Bootstrap a New Project**
   ```
   In Claude Code, type: /gen-skeleton
   ```
   This will create a complete Supabase backend skeleton.

4. **Set Up UI**
   ```
   In Claude Code, type: /gen-ui
   ```
   This will scaffold a React UI with shadcn/ui and Supabase integration.

## Project Structure

Your generated slices will follow this structure:

```
src/slices/{slice-name}/
├── CommandHandler.ts    # Business logic (state-change slices)
├── Projection.ts        # Read model (state-view slices)
├── processor.ts         # CRON automation (automation slices)
├── routes.ts            # HTTP API endpoints
├── {SliceName}.test.ts  # Automated tests
└── ui/                  # UI components (optional)
```

## Event Model Location

Make sure your event model JSON files are in one of these locations:
- `src/events/`
- `events/`
- Root directory

Claude Code will automatically find and read your event model.

## Template Files

This project includes the following template files:

- **`Claude.md`** - Project-specific configuration for Claude Code
- **`AGENTS.md`** - Track learnings and patterns from development
- **`ralph.sh`** - Autonomous agent loop for continuous development
- **`prompt.md`** - Agent instructions for automated development

## Development Workflow

1. **Define your event model** in JSON format
2. **Run a Claude skill** (e.g., `/state-change-slice`)
3. **Claude generates the code** with tests
4. **Tests run automatically** to verify correctness
5. **Iterate** - modify the model and regenerate as needed

## Autonomous Development with ralph.sh

Run the autonomous agent loop:

```bash
./ralph.sh
```

This will:
- Read instructions from `prompt.md`
- Execute development tasks automatically
- Track learnings in `AGENTS.md`
- Continue until the task is complete

## Need Help?

- Check the main EMBuilder documentation: https://github.com/dilgerma/embuilder
- Review the event model specifications in `src/events/`
- Ask Claude Code for guidance on any command

## EMBuilder Commands

If you need to reinstall or update EMBuilder:

```bash
# Install/update skills
npx @dilgerma/embuilder install

# Install with template files
npx @dilgerma/embuilder install --with-templates

# Check installation status
npx @dilgerma/embuilder status

# Uninstall
npx @dilgerma/embuilder uninstall
```

---

Generated by EMBuilder - Event-Model driven development for Claude Code